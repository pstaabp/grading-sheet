{"remainingRequest":"/Users/pstaab/code/standards-grading/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/pstaab/code/standards-grading/src/views/instructor-views/Settings.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/pstaab/code/standards-grading/src/views/instructor-views/Settings.vue","mtime":1592235478413},{"path":"/Users/pstaab/code/standards-grading/node_modules/cache-loader/dist/cjs.js","mtime":1588951537868},{"path":"/Users/pstaab/code/standards-grading/node_modules/babel-loader/lib/index.js","mtime":1588951537846},{"path":"/Users/pstaab/code/standards-grading/node_modules/ts-loader/index.js","mtime":1588951543530},{"path":"/Users/pstaab/code/standards-grading/node_modules/cache-loader/dist/cjs.js","mtime":1588951537868},{"path":"/Users/pstaab/code/standards-grading/node_modules/vue-loader/lib/index.js","mtime":1588951550037}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7CiAgQ29tcG9uZW50LCBWdWUsCn0gZnJvbSAidnVlLXByb3BlcnR5LWRlY29yYXRvciI7CmltcG9ydCBpbnRlcnNlY3Rpb24gZnJvbSAibG9kYXNoLWVzL2ludGVyc2VjdGlvbiI7CgppbXBvcnQgeyBzZXR0aW5nc19zdG9yZSB9IGZyb20gIkAvc3RvcmUiOwppbXBvcnQgQWRkQ2F0ZWdvcnlNb2RhbCBmcm9tICJAL2NvbXBvbmVudHMvQWRkQ2F0ZWdvcnlNb2RhbC52dWUiOwppbXBvcnQgeyBuZXdHcmFkZVN1YmNhdGVnb3J5IH0gZnJvbSAiQC9jb21tb24iOwppbXBvcnQgeyBHcmFkZUNhdGVnb3J5IH0gZnJvbSAiLi4vLi4vc3RvcmUvbW9kZWxzIjsKCi8vIEBDb21wb25lbnQoeyBuYW1lOiAiQWRkTmV3VXNlciIgfSkKQENvbXBvbmVudCh7CiAgY29tcG9uZW50czogewogICAgQWRkQ2F0ZWdvcnlNb2RhbCwKICB9LAp9KQpleHBvcnQgZGVmYXVsdCBjbGFzcyBTZXR0aW5ncyBleHRlbmRzIFZ1ZSB7CiAgcHJpdmF0ZSBjYXRlZ29yaWVzOiBHcmFkZUNhdGVnb3J5W10gPSBbXTsKICBwcml2YXRlIHN1YmNhdGVnb3JpZXM6IEdyYWRlU3ViY2F0ZWdvcnlbXSA9IFtdOwoKICBwcml2YXRlIGZpZWxkcyA9IFsKICAgIHsga2V5OiAiZ3JhZGVfbmFtZSIgfSwKICAgIHsga2V5OiAic3ViY2F0ZWdvcnlfZGVzY3JpcHRpb24iIH0sCiAgXQogIHByaXZhdGUgZ2V0IGNhdGVnb3J5X25hbWVzKCkgewogICAgcmV0dXJuIGludGVyc2VjdGlvbih0aGlzLmNhdGVnb3JpZXMubWFwKChfY2F0KSA9PiBfY2F0LmNhdGVnb3J5KSk7CiAgfQoKICBwcml2YXRlIGdldFN1YmNhdGVnb3J5KGNhdF9uYW1lOiBzdHJpbmcpIHsKICAgIGNvbnNvbGUubG9nKGNhdF9uYW1lKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICBjb25zdCBjYXQgPSB0aGlzLmNhdGVnb3JpZXMuZmluZCgoX2NhdDogR3JhZGVDYXRlZ29yeSkgPT4gX2NhdC5jYXRlZ29yeSA9PT0gY2F0X25hbWUpOwoKICAgIHJldHVybiBjYXQgPyB0aGlzLnN1YmNhdGVnb3JpZXMKICAgICAgLmZpbHRlcigoX2NhdCkgPT4gX2NhdC5jb3Vyc2VfZ3JhZGVfY2F0ZWdvcnlfaWQgPT09IGNhdC5jb3Vyc2VfZ3JhZGVfY2F0ZWdvcnlfaWQpIDogbmV3R3JhZGVTdWJjYXRlZ29yeSgpOwogIH0KCiAgcHJpdmF0ZSBnZXRDYXRlZ29yeURlc2NyaXB0aW9uKGNhdF9uYW1lOiBzdHJpbmcpIHsKICAgIGNvbnN0IGNhdCA9IHRoaXMuY2F0ZWdvcmllcy5maW5kKChfY2F0OiBHcmFkZUNhdGVnb3J5KSA9PiBfY2F0LmNhdGVnb3J5ID09PSBjYXRfbmFtZSk7CiAgICByZXR1cm4gY2F0ID8gY2F0LmNhdGVnb3J5X2Rlc2NyaXB0aW9uIDogIiI7CiAgfQoKICBwcml2YXRlIGJlZm9yZU1vdW50KCkgewogICAgdGhpcy5jYXRlZ29yaWVzID0gQXJyYXkuZnJvbShzZXR0aW5nc19zdG9yZS5ncmFkZV9jYXRlZ29yaWVzKTsKICAgIHRoaXMuc3ViY2F0ZWdvcmllcyA9IEFycmF5LmZyb20oc2V0dGluZ3Nfc3RvcmUuZ3JhZGVfc3ViY2F0ZWdvcmllcyk7CgogICAgdGhpcy4kc3RvcmUuc3Vic2NyaWJlKChtdXRhdGlvbikgPT4gewogICAgICBjb25zb2xlLmxvZyhtdXRhdGlvbik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICBpZiAobXV0YXRpb24udHlwZSA9PT0gIlNldHRpbmdzTW9kdWxlL25ld0NhdGVnb3J5IiB8fCBtdXRhdGlvbi50eXBlID09PSAiU2V0dGluZ3NNb2R1bGUvc2V0R3JhZGVDYXRlZ29yaWVzIikgewogICAgICAgIHRoaXMuY2F0ZWdvcmllcyA9IEFycmF5LmZyb20oc2V0dGluZ3Nfc3RvcmUuZ3JhZGVfY2F0ZWdvcmllcyk7CiAgICAgIH0KCiAgICAgIGlmIChbIlNldHRpbmdzTW9kdWxlL25ld1N1YmNhdGVnb3J5IiwgIlNldHRpbmdzTW9kdWxlL3NldEdyYWRlU3ViY2F0ZWdvcmllcyJdLmluY2x1ZGVzKG11dGF0aW9uLnR5cGUpKSB7CiAgICAgICAgdGhpcy5zdWJjYXRlZ29yaWVzID0gQXJyYXkuZnJvbShzZXR0aW5nc19zdG9yZS5ncmFkZV9zdWJjYXRlZ29yaWVzKTsKICAgICAgfQogICAgfSk7CiAgfQp9Cg=="},{"version":3,"sources":["Settings.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Settings.vue","sourceRoot":"src/views/instructor-views","sourcesContent":["<script lang=\"ts\">\nimport {\n  Component, Vue,\n} from \"vue-property-decorator\";\nimport intersection from \"lodash-es/intersection\";\n\nimport { settings_store } from \"@/store\";\nimport AddCategoryModal from \"@/components/AddCategoryModal.vue\";\nimport { newGradeSubcategory } from \"@/common\";\nimport { GradeCategory } from \"../../store/models\";\n\n// @Component({ name: \"AddNewUser\" })\n@Component({\n  components: {\n    AddCategoryModal,\n  },\n})\nexport default class Settings extends Vue {\n  private categories: GradeCategory[] = [];\n  private subcategories: GradeSubcategory[] = [];\n\n  private fields = [\n    { key: \"grade_name\" },\n    { key: \"subcategory_description\" },\n  ]\n  private get category_names() {\n    return intersection(this.categories.map((_cat) => _cat.category));\n  }\n\n  private getSubcategory(cat_name: string) {\n    console.log(cat_name); // eslint-disable-line no-console\n    const cat = this.categories.find((_cat: GradeCategory) => _cat.category === cat_name);\n\n    return cat ? this.subcategories\n      .filter((_cat) => _cat.course_grade_category_id === cat.course_grade_category_id) : newGradeSubcategory();\n  }\n\n  private getCategoryDescription(cat_name: string) {\n    const cat = this.categories.find((_cat: GradeCategory) => _cat.category === cat_name);\n    return cat ? cat.category_description : \"\";\n  }\n\n  private beforeMount() {\n    this.categories = Array.from(settings_store.grade_categories);\n    this.subcategories = Array.from(settings_store.grade_subcategories);\n\n    this.$store.subscribe((mutation) => {\n      console.log(mutation); // eslint-disable-line no-console\n      if (mutation.type === \"SettingsModule/newCategory\" || mutation.type === \"SettingsModule/setGradeCategories\") {\n        this.categories = Array.from(settings_store.grade_categories);\n      }\n\n      if ([\"SettingsModule/newSubcategory\", \"SettingsModule/setGradeSubcategories\"].includes(mutation.type)) {\n        this.subcategories = Array.from(settings_store.grade_subcategories);\n      }\n    });\n  }\n}\n</script>\n\n<template>\n  <div>\n    <b-container>\n      <b-row>\n        <b-col cols=\"9\">\n          <b-card no-body>\n            <b-tabs card>\n              <b-tab v-for=\"name in category_names\" :title=\"name\" :key=\"name\">\n                <h5>{{getCategoryDescription(name)}}</h5>\n                <b-table :items=\"getSubcategory(name)\" :fields=\"fields\">\n                  <template v-slot:cell(grade_name)=\"data\">\n                     {{ name }}{{data.item.subcategory}}\n                   </template>\n                </b-table>\n              </b-tab>\n            </b-tabs>\n          </b-card>\n        </b-col>\n        <b-col cols=\"3\">\n          <b-card title=\"Options\">\n            <b-btn v-b-modal.add-category-modal size=\"sm\" variant=\"primary\">Add New Category</b-btn>\n          </b-card>\n        </b-col>\n      </b-row>\n    </b-container>\n    <add-category-modal />\n  </div>\n</template>\n"]}]}