{"remainingRequest":"/Users/pstaab/code/standards-grading/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/pstaab/code/standards-grading/src/views/instructor-views/Settings.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/pstaab/code/standards-grading/src/views/instructor-views/Settings.vue","mtime":1592341113778},{"path":"/Users/pstaab/code/standards-grading/node_modules/cache-loader/dist/cjs.js","mtime":1588951537868},{"path":"/Users/pstaab/code/standards-grading/node_modules/babel-loader/lib/index.js","mtime":1588951537846},{"path":"/Users/pstaab/code/standards-grading/node_modules/ts-loader/index.js","mtime":1588951543530},{"path":"/Users/pstaab/code/standards-grading/node_modules/cache-loader/dist/cjs.js","mtime":1588951537868},{"path":"/Users/pstaab/code/standards-grading/node_modules/vue-loader/lib/index.js","mtime":1588951550037}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7CiAgQ29tcG9uZW50LCBWdWUsCn0gZnJvbSAidnVlLXByb3BlcnR5LWRlY29yYXRvciI7CmltcG9ydCBpbnRlcnNlY3Rpb24gZnJvbSAibG9kYXNoLWVzL2ludGVyc2VjdGlvbiI7CgppbXBvcnQgeyBzZXR0aW5nc19zdG9yZSwgYXBwX3N0YXRlX3N0b3JlIH0gZnJvbSAiQC9zdG9yZSI7CmltcG9ydCBBZGRDYXRlZ29yeU1vZGFsIGZyb20gIkAvY29tcG9uZW50cy9BZGRDYXRlZ29yeU1vZGFsLnZ1ZSI7CmltcG9ydCBFZGl0Q2F0ZWdvcnlNb2RhbCBmcm9tICJAL2NvbXBvbmVudHMvRWRpdENhdGVnb3J5TW9kYWwudnVlIjsKaW1wb3J0IHsgbmV3R3JhZGVTdWJjYXRlZ29yeSB9IGZyb20gIkAvY29tbW9uIjsKaW1wb3J0IHsgR3JhZGVDYXRlZ29yeSB9IGZyb20gIi4uLy4uL3N0b3JlL21vZGVscyI7CgovLyBAQ29tcG9uZW50KHsgbmFtZTogIkFkZE5ld1VzZXIiIH0pCkBDb21wb25lbnQoewogIGNvbXBvbmVudHM6IHsKICAgIEFkZENhdGVnb3J5TW9kYWwsCiAgICBFZGl0Q2F0ZWdvcnlNb2RhbCwKICB9LAp9KQpleHBvcnQgZGVmYXVsdCBjbGFzcyBTZXR0aW5ncyBleHRlbmRzIFZ1ZSB7CiAgcHJpdmF0ZSBzZWxlY3RlZF9zdWJjYXRlZ29yeSA9IG5ld0dyYWRlU3ViY2F0ZWdvcnkoKTsKICAvLyBwcml2YXRlIGNhdGVnb3JpZXM6IEdyYWRlQ2F0ZWdvcnlbXSA9IFtdOwogIC8vIHByaXZhdGUgc3ViY2F0ZWdvcmllczogR3JhZGVTdWJjYXRlZ29yeVtdID0gW107CgogIHByaXZhdGUgZmllbGRzID0gWwogICAgeyBrZXk6ICJncmFkZV9uYW1lIiB9LAogICAgeyBrZXk6ICJzdWJjYXRlZ29yeV9kZXNjcmlwdGlvbiIgfSwKICBdCiAgcHJpdmF0ZSBnZXQgY2F0ZWdvcnlfbmFtZXMoKSB7CiAgICByZXR1cm4gaW50ZXJzZWN0aW9uKHRoaXMuY2F0ZWdvcmllcy5tYXAoKF9jYXQpID0+IF9jYXQuY2F0ZWdvcnkpKTsKICB9CgogIHByaXZhdGUgZ2V0IGNhdGVnb3JpZXMoKSB7CiAgICByZXR1cm4gc2V0dGluZ3Nfc3RvcmUuZ3JhZGVfY2F0ZWdvcmllczsKICB9CgogIHByaXZhdGUgZ2V0IHN1YmNhdGVnb3JpZXMoKSB7CiAgICByZXR1cm4gc2V0dGluZ3Nfc3RvcmUuZ3JhZGVfc3ViY2F0ZWdvcmllcwogICAgICAuZmlsdGVyKChfY2F0OiBHcmFkZVN1YmNhdGVnb3J5KSA9PiBfY2F0LmNvdXJzZV9pZCA9PT0gYXBwX3N0YXRlX3N0b3JlLmN1cnJlbnRfY291cnNlX2lkKTsKICB9CgogIHByaXZhdGUgZ2V0U3ViY2F0ZWdvcnkoY2F0X25hbWU6IHN0cmluZykgewogICAgY29uc3QgY2F0ID0gdGhpcy5jYXRlZ29yaWVzLmZpbmQoKF9jYXQ6IEdyYWRlQ2F0ZWdvcnkpID0+IF9jYXQuY2F0ZWdvcnkgPT09IGNhdF9uYW1lKTsKICAgIHJldHVybiBjYXQgPyB0aGlzLnN1YmNhdGVnb3JpZXMKICAgICAgLmZpbHRlcigoX2NhdCkgPT4gX2NhdC5jb3Vyc2VfZ3JhZGVfY2F0ZWdvcnlfaWQgPT09IGNhdC5jb3Vyc2VfZ3JhZGVfY2F0ZWdvcnlfaWQpIDogbmV3R3JhZGVTdWJjYXRlZ29yeSgpOwogIH0KCiAgcHJpdmF0ZSBnZXRDYXRlZ29yeURlc2NyaXB0aW9uKGNhdF9uYW1lOiBzdHJpbmcpIHsKICAgIGNvbnN0IGNhdCA9IHRoaXMuY2F0ZWdvcmllcy5maW5kKChfY2F0OiBHcmFkZUNhdGVnb3J5KSA9PiBfY2F0LmNhdGVnb3J5ID09PSBjYXRfbmFtZSk7CiAgICByZXR1cm4gY2F0ID8gY2F0LmNhdGVnb3J5X2Rlc2NyaXB0aW9uIDogIiI7CiAgfQoKICBwcml2YXRlIG9uUm93U2VsZWN0ZWQoaXRlbXMpIHsKICAgIHRoaXMuc2VsZWN0ZWRfc3ViY2F0ZWdvcnkgPSBpdGVtc1swXSBhcyBHcmFkZVN1YmNhdGVnb3J5OwogICAgY29uc29sZS5sb2codGhpcy5zZWxlY3RlZF9zdWJjYXRlZ29yeSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogIH0KCiAgLy8gcHJpdmF0ZSBiZWZvcmVNb3VudCgpIHsKICAvLyAgIHRoaXMuY2F0ZWdvcmllcyA9IEFycmF5LmZyb20oc2V0dGluZ3Nfc3RvcmUuZ3JhZGVfY2F0ZWdvcmllcyk7CiAgLy8gICB0aGlzLnN1YmNhdGVnb3JpZXMgPSBBcnJheS5mcm9tKHNldHRpbmdzX3N0b3JlLmdyYWRlX3N1YmNhdGVnb3JpZXMpOwogIC8vCiAgLy8gICB0aGlzLiRzdG9yZS5zdWJzY3JpYmUoKG11dGF0aW9uKSA9PiB7CiAgLy8gICAgIGlmIChtdXRhdGlvbi50eXBlID09PSAiU2V0dGluZ3NNb2R1bGUvbmV3Q2F0ZWdvcnkiIHx8IG11dGF0aW9uLnR5cGUgPT09ICJTZXR0aW5nc01vZHVsZS9zZXRHcmFkZUNhdGVnb3JpZXMiKSB7CiAgLy8gICAgICAgdGhpcy5jYXRlZ29yaWVzID0gQXJyYXkuZnJvbShzZXR0aW5nc19zdG9yZS5ncmFkZV9jYXRlZ29yaWVzKTsKICAvLyAgICAgfQogIC8vCiAgLy8gICAgIGlmIChbIlNldHRpbmdzTW9kdWxlL25ld1N1YmNhdGVnb3J5IiwgIlNldHRpbmdzTW9kdWxlL3NldEdyYWRlU3ViY2F0ZWdvcmllcyJdLmluY2x1ZGVzKG11dGF0aW9uLnR5cGUpKSB7CiAgLy8gICAgICAgdGhpcy5zdWJjYXRlZ29yaWVzID0gQXJyYXkuZnJvbShzZXR0aW5nc19zdG9yZS5ncmFkZV9zdWJjYXRlZ29yaWVzKTsKICAvLyAgICAgfQogIC8vICAgfSk7CiAgLy8gfQp9Cg=="},{"version":3,"sources":["Settings.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Settings.vue","sourceRoot":"src/views/instructor-views","sourcesContent":["<script lang=\"ts\">\nimport {\n  Component, Vue,\n} from \"vue-property-decorator\";\nimport intersection from \"lodash-es/intersection\";\n\nimport { settings_store, app_state_store } from \"@/store\";\nimport AddCategoryModal from \"@/components/AddCategoryModal.vue\";\nimport EditCategoryModal from \"@/components/EditCategoryModal.vue\";\nimport { newGradeSubcategory } from \"@/common\";\nimport { GradeCategory } from \"../../store/models\";\n\n// @Component({ name: \"AddNewUser\" })\n@Component({\n  components: {\n    AddCategoryModal,\n    EditCategoryModal,\n  },\n})\nexport default class Settings extends Vue {\n  private selected_subcategory = newGradeSubcategory();\n  // private categories: GradeCategory[] = [];\n  // private subcategories: GradeSubcategory[] = [];\n\n  private fields = [\n    { key: \"grade_name\" },\n    { key: \"subcategory_description\" },\n  ]\n  private get category_names() {\n    return intersection(this.categories.map((_cat) => _cat.category));\n  }\n\n  private get categories() {\n    return settings_store.grade_categories;\n  }\n\n  private get subcategories() {\n    return settings_store.grade_subcategories\n      .filter((_cat: GradeSubcategory) => _cat.course_id === app_state_store.current_course_id);\n  }\n\n  private getSubcategory(cat_name: string) {\n    const cat = this.categories.find((_cat: GradeCategory) => _cat.category === cat_name);\n    return cat ? this.subcategories\n      .filter((_cat) => _cat.course_grade_category_id === cat.course_grade_category_id) : newGradeSubcategory();\n  }\n\n  private getCategoryDescription(cat_name: string) {\n    const cat = this.categories.find((_cat: GradeCategory) => _cat.category === cat_name);\n    return cat ? cat.category_description : \"\";\n  }\n\n  private onRowSelected(items) {\n    this.selected_subcategory = items[0] as GradeSubcategory;\n    console.log(this.selected_subcategory); // eslint-disable-line no-console\n  }\n\n  // private beforeMount() {\n  //   this.categories = Array.from(settings_store.grade_categories);\n  //   this.subcategories = Array.from(settings_store.grade_subcategories);\n  //\n  //   this.$store.subscribe((mutation) => {\n  //     if (mutation.type === \"SettingsModule/newCategory\" || mutation.type === \"SettingsModule/setGradeCategories\") {\n  //       this.categories = Array.from(settings_store.grade_categories);\n  //     }\n  //\n  //     if ([\"SettingsModule/newSubcategory\", \"SettingsModule/setGradeSubcategories\"].includes(mutation.type)) {\n  //       this.subcategories = Array.from(settings_store.grade_subcategories);\n  //     }\n  //   });\n  // }\n}\n</script>\n\n<template>\n  <div>\n    <b-container>\n      <b-row>\n        <b-col cols=\"9\">\n          <b-card no-body>\n            <b-tabs card>\n              <b-tab v-for=\"name in category_names\" :title=\"name\" :key=\"name\">\n                <h5>{{getCategoryDescription(name)}}</h5>\n                <b-table\n                  :items=\"getSubcategory(name)\"\n                  :fields=\"fields\"\n                  selectable\n                  selectMode=\"single\"\n                  @row-selected=\"onRowSelected\"\n                  >\n                  <template v-slot:cell(grade_name)=\"data\">\n                     {{ name }}{{data.item.subcategory}}\n                   </template>\n                </b-table>\n              </b-tab>\n            </b-tabs>\n          </b-card>\n        </b-col>\n        <b-col cols=\"3\">\n          <b-card title=\"Options\">\n            <b-btn v-b-modal.add-category-modal size=\"sm\" variant=\"primary\">Add New Category</b-btn>\n          </b-card>\n          <b-card title=\"Edit Table\">\n            <b-btn v-b-modal.edit-category-modal size=\"sm\" variant=\"primary\">Edit Selected Rows</b-btn>\n          </b-card>\n        </b-col>\n      </b-row>\n    </b-container>\n    <add-category-modal />\n    <edit-category-modal :subcategory=\"selected_subcategory\"/>\n  </div>\n</template>\n"]}]}