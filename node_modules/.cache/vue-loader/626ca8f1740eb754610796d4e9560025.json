{"remainingRequest":"/Users/pstaab/code/standards-grading/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/pstaab/code/standards-grading/src/components/AddCategoryModal.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/pstaab/code/standards-grading/src/components/AddCategoryModal.vue","mtime":1592236811513},{"path":"/Users/pstaab/code/standards-grading/node_modules/cache-loader/dist/cjs.js","mtime":1588951537868},{"path":"/Users/pstaab/code/standards-grading/node_modules/babel-loader/lib/index.js","mtime":1588951537846},{"path":"/Users/pstaab/code/standards-grading/node_modules/ts-loader/index.js","mtime":1588951543530},{"path":"/Users/pstaab/code/standards-grading/node_modules/cache-loader/dist/cjs.js","mtime":1588951537868},{"path":"/Users/pstaab/code/standards-grading/node_modules/vue-loader/lib/index.js","mtime":1588951550037}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7CiAgQ29tcG9uZW50LCBWdWUsCn0gZnJvbSAidnVlLXByb3BlcnR5LWRlY29yYXRvciI7CgppbXBvcnQgaW50ZXJzZWN0aW9uIGZyb20gImxvZGFzaC1lcy9pbnRlcnNlY3Rpb24iOwoKLy8gaW1wb3J0IHsgQkljb25QZXJzb25DaXJjbGUgfSBmcm9tICJib290c3RyYXAtdnVlIjsKaW1wb3J0IHsgc2V0dGluZ3Nfc3RvcmUgfSBmcm9tICJAL3N0b3JlIjsKaW1wb3J0IHsgbmV3R3JhZGVDYXRlZ29yeSwgbmV3R3JhZGVTdWJjYXRlZ29yeSB9IGZyb20gIkAvY29tbW9uIjsKaW1wb3J0IHsgR3JhZGVDYXRlZ29yeSB9IGZyb20gIi4uL3N0b3JlL21vZGVscyI7CgpAQ29tcG9uZW50KHt9KQpleHBvcnQgZGVmYXVsdCBjbGFzcyBBZGRDYXRlZ29yeU1vZGFsIGV4dGVuZHMgVnVlIHsKICBwcml2YXRlIHNlbGVjdGVkX2NhdGVnb3J5ID0gIiI7CiAgcHJpdmF0ZSBjYXRlZ29yeSA9IG5ld0dyYWRlQ2F0ZWdvcnkoKTsKICBwcml2YXRlIHN1YmNhdGVnb3J5ID0gbmV3R3JhZGVTdWJjYXRlZ29yeSgpOwoKICBwcml2YXRlIGdldCBjYXRlZ29yeV9vcHRpb25zKCkgewogICAgcmV0dXJuIGludGVyc2VjdGlvbihzZXR0aW5nc19zdG9yZS5ncmFkZV9jYXRlZ29yaWVzIC8vIGludGVyc2VjdGlvbiByZXR1cm5zIHRoZSB1bmlxdWUgZWxlbWVudHMuCiAgICAgIC5tYXAoKF9jYXQ6R3JhZGVDYXRlZ29yeSkgPT4gX2NhdC5jYXRlZ29yeSkpOwogIH0KCiAgcHJpdmF0ZSBhc3luYyBzYXZlQ2F0ZWdvcnkoKSB7CiAgICBpZiAodGhpcy5zZWxlY3RlZF9jYXRlZ29yeSAhPT0gIl9fTkVXX18iKSB7CiAgICAgIGNvbnN0IGNhdCA9IGF3YWl0IHNldHRpbmdzX3N0b3JlLmFkZENhdGVnb3J5KHRoaXMuY2F0ZWdvcnkpOwogICAgICBjb25zb2xlLmxvZyhjYXQpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgICAgdGhpcy5zdWJjYXRlZ29yeS5jb3Vyc2VfZ3JhZGVfY2F0ZWdvcnlfaWQgPSBjYXQuY291cnNlX2dyYWRlX2NhdGVnb3J5X2lkOwogICAgfQogICAgYXdhaXQgc2V0dGluZ3Nfc3RvcmUuYWRkU3ViY2F0ZWdvcnkodGhpcy5zdWJjYXRlZ29yeSk7CiAgfQp9Cg=="},{"version":3,"sources":["AddCategoryModal.vue"],"names":[],"mappings":";AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddCategoryModal.vue","sourceRoot":"src/components","sourcesContent":["<script lang=\"ts\">\nimport {\n  Component, Vue,\n} from \"vue-property-decorator\";\n\nimport intersection from \"lodash-es/intersection\";\n\n// import { BIconPersonCircle } from \"bootstrap-vue\";\nimport { settings_store } from \"@/store\";\nimport { newGradeCategory, newGradeSubcategory } from \"@/common\";\nimport { GradeCategory } from \"../store/models\";\n\n@Component({})\nexport default class AddCategoryModal extends Vue {\n  private selected_category = \"\";\n  private category = newGradeCategory();\n  private subcategory = newGradeSubcategory();\n\n  private get category_options() {\n    return intersection(settings_store.grade_categories // intersection returns the unique elements.\n      .map((_cat:GradeCategory) => _cat.category));\n  }\n\n  private async saveCategory() {\n    if (this.selected_category !== \"__NEW__\") {\n      const cat = await settings_store.addCategory(this.category);\n      console.log(cat); // eslint-disable-line no-console\n      this.subcategory.course_grade_category_id = cat.course_grade_category_id;\n    }\n    await settings_store.addSubcategory(this.subcategory);\n  }\n}\n</script>\n\n<template>\n  <b-modal\n    size=\"lg\"\n    id=\"add-category-modal\"\n    title=\"Add a New Category\"\n    @ok=\"saveCategory\"\n    >\n    <b-form-group label=\"Category\" label-cols=\"3\">\n      <b-select v-model=\"selected_category\" :options=\"category_options\">\n        <template v-slot:first>\n          <b-form-select-option :value=\"''\" disabled>Select a Category...</b-form-select-option>\n        </template>\n        <b-form-select-option value=\"__NEW__\">New Grade Category</b-form-select-option>\n      </b-select>\n    </b-form-group>\n    <b-form-group  v-if=\"selected_category === '__NEW__'\" label=\"New Category\" label-cols=\"3\">\n      <b-input v-model=\"category.category\" />\n    </b-form-group>\n    <b-form-group  v-if=\"selected_category === '__NEW__'\" label=\"New Description\" label-cols=\"3\">\n      <b-input v-model=\"category.category_description\" />\n    </b-form-group>\n\n    <b-form-group label=\"Subcategory\" label-cols=\"3\">\n      <b-input v-model=\"subcategory.subcategory\" />\n    </b-form-group>\n    <b-form-group label=\"Description\">\n      <b-input v-model=\"subcategory.subcategory_description\" />\n    </b-form-group>\n  </b-modal>\n</template>\n"]}]}