{"remainingRequest":"/Users/pstaab/code/standards-grading/node_modules/babel-loader/lib/index.js!/Users/pstaab/code/standards-grading/node_modules/ts-loader/index.js??ref--14-2!/Users/pstaab/code/standards-grading/node_modules/eslint-loader/index.js??ref--13-0!/Users/pstaab/code/standards-grading/src/store/modules/user.ts","dependencies":[{"path":"/Users/pstaab/code/standards-grading/src/store/modules/user.ts","mtime":1591626908249},{"path":"/Users/pstaab/code/standards-grading/node_modules/cache-loader/dist/cjs.js","mtime":1588951537868},{"path":"/Users/pstaab/code/standards-grading/node_modules/babel-loader/lib/index.js","mtime":1588951537846},{"path":"/Users/pstaab/code/standards-grading/node_modules/ts-loader/index.js","mtime":1588951543530},{"path":"/Users/pstaab/code/standards-grading/node_modules/eslint-loader/index.js","mtime":1588951542635}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9Vc2Vycy9wc3RhYWIvY29kZS9zdGFuZGFyZHMtZ3JhZGluZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9Vc2Vycy9wc3RhYWIvY29kZS9zdGFuZGFyZHMtZ3JhZGluZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9Vc2Vycy9wc3RhYWIvY29kZS9zdGFuZGFyZHMtZ3JhZGluZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMiOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIi9Vc2Vycy9wc3RhYWIvY29kZS9zdGFuZGFyZHMtZ3JhZGluZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXIiOwppbXBvcnQgeyBfX2F3YWl0ZXIsIF9fZGVjb3JhdGUgfSBmcm9tICJ0c2xpYiI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IE1vZHVsZSwgVnVleE1vZHVsZSwgTXV0YXRpb24sIEFjdGlvbiB9IGZyb20gInZ1ZXgtbW9kdWxlLWRlY29yYXRvcnMiOwppbXBvcnQgeyBuZXdVc2VyIH0gZnJvbSAiQC9jb21tb24iOyAvLyB0aGUgZm9sbG93aW5nIHBhcnNlcyB0aGUgaW5mb3JtYXRpb24gZnJvbSB0aGUgc2VydmVyCgpmdW5jdGlvbiBwYXJzZVVzZXIoX3VzZXIpIHsKICB2YXIgdXNlciA9IG5ld1VzZXIoKTsKICB1c2VyLmxvZ2luX25hbWUgPSBfdXNlci5sb2dpbl9uYW1lOwogIHVzZXIuZmlyc3RfbmFtZSA9IF91c2VyLmZpcnN0X25hbWU7CiAgdXNlci5sYXN0X25hbWUgPSBfdXNlci5sYXN0X25hbWU7CiAgdXNlci51c2VyX2lkID0gX3VzZXIudXNlcl9pZDsKICB1c2VyLmVtYWlsID0gX3VzZXIuZW1haWw7CiAgdXNlci5pc19hZG1pbiA9IF91c2VyLmlzX2FkbWluICE9PSAiMSI7CiAgcmV0dXJuIHVzZXI7Cn0KCnZhciBVc2Vyc01vZHVsZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1Z1ZXhNb2R1bGUpIHsKICBfaW5oZXJpdHMoVXNlcnNNb2R1bGUsIF9WdWV4TW9kdWxlKTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihVc2Vyc01vZHVsZSk7CgogIGZ1bmN0aW9uIFVzZXJzTW9kdWxlKCkgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBVc2Vyc01vZHVsZSk7CgogICAgX3RoaXMgPSBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIF90aGlzLnVzZXJfc3RhdGUgPSB7CiAgICAgIHVzZXJzOiBbXSwKICAgICAgdXNlcl9jb3Vyc2VzOiBbXQogICAgfTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhVc2Vyc01vZHVsZSwgW3sKICAgIGtleTogImZldGNoVXNlcnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZldGNoVXNlcnMoKSB7CiAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXNwb25zZSwgdXNlcnM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KCIvZ3JhZGluZ3NoZWV0L2FwaS91c2VycyIpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICB1c2VycyA9IHJlc3BvbnNlLmRhdGEubWFwKGZ1bmN0aW9uIChvYmopIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlVXNlcihvYmopOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB0aGlzLnNldFVzZXJzKHVzZXJzKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHVzZXJzKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICAgIH0pKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmZXRjaFVzZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZldGNoVXNlcih1c2VyX2lkKSB7CiAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5nZXQoIi9ncmFkaW5nc2hlZXQvYXBpL3VzZXJzLyIuY29uY2F0KHVzZXJfaWQpKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBwYXJzZVVzZXIocmVzcG9uc2UuZGF0YSkpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZmV0Y2hVc2VyQ291cnNlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmV0Y2hVc2VyQ291cnNlcyhvcHRzKSB7CiAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgcmVzcG9uc2UsIGNvdXJzZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5nZXQoIi9ncmFkaW5nc2hlZXQvYXBpL3VzZXJzLyIuY29uY2F0KG9wdHMubG9naW5fbmFtZSwgIi9jb3Vyc2VzIikpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgY291cnNlcyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICB0aGlzLnNldFVzZXJDb3Vyc2VzKGNvdXJzZXMpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIGNvdXJzZXMpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIHRoaXMpOwogICAgICB9KSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0VXNlcnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFVzZXJzKF91c2VycykgewogICAgICB0aGlzLnVzZXJfc3RhdGUudXNlcnMgPSBfdXNlcnM7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0VXNlckNvdXJzZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFVzZXJDb3Vyc2VzKF9jb3Vyc2VzKSB7CiAgICAgIHRoaXMudXNlcl9zdGF0ZS51c2VyX2NvdXJzZXMgPSBfY291cnNlczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1c2VycyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMudXNlcl9zdGF0ZS51c2VyczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1c2VyX2NvdXJzZXMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLnVzZXJfc3RhdGUudXNlcl9jb3Vyc2VzOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFVzZXJzTW9kdWxlOwp9KFZ1ZXhNb2R1bGUpOwoKX19kZWNvcmF0ZShbQWN0aW9uXSwgVXNlcnNNb2R1bGUucHJvdG90eXBlLCAiZmV0Y2hVc2VycyIsIG51bGwpOwoKX19kZWNvcmF0ZShbQWN0aW9uXSwgVXNlcnNNb2R1bGUucHJvdG90eXBlLCAiZmV0Y2hVc2VyIiwgbnVsbCk7CgpfX2RlY29yYXRlKFtBY3Rpb25dLCBVc2Vyc01vZHVsZS5wcm90b3R5cGUsICJmZXRjaFVzZXJDb3Vyc2VzIiwgbnVsbCk7CgpfX2RlY29yYXRlKFtNdXRhdGlvbl0sIFVzZXJzTW9kdWxlLnByb3RvdHlwZSwgInNldFVzZXJzIiwgbnVsbCk7CgpfX2RlY29yYXRlKFtNdXRhdGlvbl0sIFVzZXJzTW9kdWxlLnByb3RvdHlwZSwgInNldFVzZXJDb3Vyc2VzIiwgbnVsbCk7CgpVc2Vyc01vZHVsZSA9IF9fZGVjb3JhdGUoW01vZHVsZSh7CiAgbmFtZTogIlVzZXJzTW9kdWxlIiwKICBuYW1lc3BhY2VkOiB0cnVlCn0pXSwgVXNlcnNNb2R1bGUpOwpleHBvcnQgZGVmYXVsdCBVc2Vyc01vZHVsZTs="},{"version":3,"sources":["/Users/pstaab/code/standards-grading/node_modules/eslint-loader/index.js??ref--13-0!/Users/pstaab/code/standards-grading/src/store/modules/user.ts"],"names":[],"mappings":";;;;;;;AAAA,OAAO,KAAP,MAAkB,OAAlB;AAEA,SACE,MADF,EACU,UADV,EACsB,QADtB,EACgC,MADhC,QAEO,wBAFP;AAIA,SAAS,OAAT,QAAwB,UAAxB,C,CAUA;;AACA,SAAS,SAAT,CAAmB,KAAnB,EAAkC;AAChC,MAAM,IAAI,GAAG,OAAO,EAApB;AACA,EAAA,IAAI,CAAC,UAAL,GAAkB,KAAK,CAAC,UAAxB;AACA,EAAA,IAAI,CAAC,UAAL,GAAkB,KAAK,CAAC,UAAxB;AACA,EAAA,IAAI,CAAC,SAAL,GAAiB,KAAK,CAAC,SAAvB;AACA,EAAA,IAAI,CAAC,OAAL,GAAe,KAAK,CAAC,OAArB;AACA,EAAA,IAAI,CAAC,KAAL,GAAa,KAAK,CAAC,KAAnB;AACA,EAAA,IAAI,CAAC,QAAL,GAAgB,KAAK,CAAC,QAAN,KAAmB,GAAnC;AACA,SAAO,IAAP;AACD;;AAGD,IAAqB,WAArB;AAAA;;AAAA;;AAAA,yBAAA;AAAA;;AAAA;;;AACU,UAAA,UAAA,GAAwB;AAC9B,MAAA,KAAK,EAAE,EADuB;AAE9B,MAAA,YAAY,EAAE;AAFgB,KAAxB;AADV;AA2CC;;AA3CD;AAAA;AAAA,iCAeyB;;;;;;;;AACJ,uBAAM,KAAK,CAAC,GAAN,CAAU,yBAAV,CAAN;;;AAAX,gBAAA,Q;AACA,gBAAA,K,GAAS,QAAQ,CAAC,IAAT,CAA6B,GAA7B,CAAiC,UAAC,GAAD;AAAA,yBAAS,SAAS,CAAC,GAAD,CAAlB;AAAA,iBAAjC,C;AACf,qBAAK,QAAL,CAAc,KAAd;iDACO,K;;;;;;;;;AACR;AApBH;AAAA;AAAA,8BAuByB,OAvBzB,EAuBwC;;;;;;;;AACnB,uBAAM,KAAK,CAAC,GAAN,mCAAqC,OAArC,EAAN;;;AAAX,gBAAA,Q;kDACC,SAAS,CAAC,QAAQ,CAAC,IAAV,C;;;;;;;;;AACjB;AA1BH;AAAA;AAAA,qCA6BgC,IA7BhC,EA6B0D;;;;;;;;AACrC,uBAAM,KAAK,CAAC,GAAN,mCAAqC,IAAI,CAAC,UAA1C,cAAN;;;AAAX,gBAAA,Q;AACA,gBAAA,O,GAAU,QAAQ,CAAC,I;AACzB,qBAAK,cAAL,CAAoB,OAApB;kDACO,O;;;;;;;;;AACR;AAlCH;AAAA;AAAA,6BAoCqB,MApCrB,EAoCmC;AAC/B,WAAK,UAAL,CAAgB,KAAhB,GAAwB,MAAxB;AACD;AAtCH;AAAA;AAAA,mCAwC2B,QAxC3B,EAwCiD;AAC7C,WAAK,UAAL,CAAgB,YAAhB,GAA+B,QAA/B;AACD;AA1CH;AAAA;AAAA,wBAMkB;AACd,aAAO,KAAK,UAAL,CAAgB,KAAvB;AACD;AARH;AAAA;AAAA,wBAUyB;AACrB,aAAO,KAAK,UAAL,CAAgB,YAAvB;AACD;AAZH;;AAAA;AAAA,EAAyC,UAAzC,CAAA;;AAeE,UAAA,CAAA,CADC,MACD,CAAA,E,qBAAA,E,YAAA,EAKC,IALD,CAAA;;AAQA,UAAA,CAAA,CADC,MACD,CAAA,E,qBAAA,E,WAAA,EAGC,IAHD,CAAA;;AAMA,UAAA,CAAA,CADC,MACD,CAAA,E,qBAAA,E,kBAAA,EAKC,IALD,CAAA;;AAOU,UAAA,CAAA,CAAT,QAAS,CAAA,E,qBAAA,E,UAAA,EAET,IAFS,CAAA;;AAIA,UAAA,CAAA,CAAT,QAAS,CAAA,E,qBAAA,E,gBAAA,EAET,IAFS,CAAA;;AAxCS,WAAW,GAAA,UAAA,CAAA,CAD/B,MAAM,CAAC;AAAE,EAAA,IAAI,EAAE,aAAR;AAAuB,EAAA,UAAU,EAAE;AAAnC,CAAD,CACyB,CAAA,EAAX,WAAW,CAAX;eAAA,W","sourcesContent":["import axios from \"axios\";\n\nimport {\n  Module, VuexModule, Mutation, Action,\n} from \"vuex-module-decorators\";\n\nimport { newUser } from \"@/common\";\nimport { User, UserCourse, Dictionary } from \"../models\";\n\ninterface UserState {\n  users: User[];\n  user_courses: UserCourse []; // these are the courses that a given user is in\n}\n\ntype UserData = Dictionary<string | number | boolean>;\n\n// the following parses the information from the server\nfunction parseUser(_user: UserData): User {\n  const user = newUser();\n  user.login_name = _user.login_name as string;\n  user.first_name = _user.first_name as string;\n  user.last_name = _user.last_name as string;\n  user.user_id = _user.user_id as number;\n  user.email = _user.email as string;\n  user.is_admin = _user.is_admin !== \"1\";\n  return user;\n}\n\n@Module({ name: \"UsersModule\", namespaced: true })\nexport default class UsersModule extends VuexModule {\n  private user_state: UserState = {\n    users: [],\n    user_courses: [],\n  }\n\n  public get users() {\n    return this.user_state.users;\n  }\n\n  public get user_courses() {\n    return this.user_state.user_courses;\n  }\n\n  @Action\n  public async fetchUsers() {\n    const response = await axios.get(\"/gradingsheet/api/users\");\n    const users = (response.data as UserData[]).map((obj) => parseUser(obj));\n    this.setUsers(users);\n    return users;\n  }\n\n  @Action\n  public async fetchUser(user_id: number) { // eslint-disable-line class-methods-use-this\n    const response = await axios.get(`/gradingsheet/api/users/${user_id}`);\n    return parseUser(response.data as UserData);\n  }\n\n  @Action\n  public async fetchUserCourses(opts: {login_name: string}) {\n    const response = await axios.get(`/gradingsheet/api/users/${opts.login_name}/courses`);\n    const courses = response.data as UserCourse[];\n    this.setUserCourses(courses);\n    return courses;\n  }\n\n  @Mutation setUsers(_users: User[]) {\n    this.user_state.users = _users;\n  }\n\n  @Mutation setUserCourses(_courses: UserCourse[]) {\n    this.user_state.user_courses = _courses;\n  }\n}\n"],"sourceRoot":""}]}