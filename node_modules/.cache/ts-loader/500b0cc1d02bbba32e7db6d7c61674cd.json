{"remainingRequest":"/Users/pstaab/code/standards-grading/node_modules/babel-loader/lib/index.js!/Users/pstaab/code/standards-grading/node_modules/ts-loader/index.js??ref--14-2!/Users/pstaab/code/standards-grading/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/pstaab/code/standards-grading/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/pstaab/code/standards-grading/src/views/instructor-views/AddNewUser.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/pstaab/code/standards-grading/src/views/instructor-views/AddNewUser.vue","mtime":1592133706080},{"path":"/Users/pstaab/code/standards-grading/node_modules/cache-loader/dist/cjs.js","mtime":1588951537868},{"path":"/Users/pstaab/code/standards-grading/node_modules/babel-loader/lib/index.js","mtime":1588951537846},{"path":"/Users/pstaab/code/standards-grading/node_modules/ts-loader/index.js","mtime":1588951543530},{"path":"/Users/pstaab/code/standards-grading/node_modules/cache-loader/dist/cjs.js","mtime":1588951537868},{"path":"/Users/pstaab/code/standards-grading/node_modules/vue-loader/lib/index.js","mtime":1588951550037}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9Vc2Vycy9wc3RhYWIvY29kZS9zdGFuZGFyZHMtZ3JhZGluZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9Vc2Vycy9wc3RhYWIvY29kZS9zdGFuZGFyZHMtZ3JhZGluZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9Vc2Vycy9wc3RhYWIvY29kZS9zdGFuZGFyZHMtZ3JhZGluZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMiOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIi9Vc2Vycy9wc3RhYWIvY29kZS9zdGFuZGFyZHMtZ3JhZGluZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXIiOwppbXBvcnQgeyBfX2F3YWl0ZXIsIF9fZGVjb3JhdGUgfSBmcm9tICJ0c2xpYiI7CmltcG9ydCB7IENvbXBvbmVudCwgVnVlIH0gZnJvbSAidnVlLXByb3BlcnR5LWRlY29yYXRvciI7CmltcG9ydCB7IGFwcF9zdGF0ZV9zdG9yZSwgdXNlcl9zdG9yZSwgY291cnNlX3N0b3JlIH0gZnJvbSAiQC9zdG9yZSI7CmltcG9ydCB7IG5ld0NvdXJzZVVzZXIgfSBmcm9tICJAL2NvbW1vbiI7IC8vIEBDb21wb25lbnQoeyBuYW1lOiAiQWRkTmV3VXNlciIgfSkKCnZhciBBZGROZXdVc2VyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfVnVlKSB7CiAgX2luaGVyaXRzKEFkZE5ld1VzZXIsIF9WdWUpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKEFkZE5ld1VzZXIpOwoKICBmdW5jdGlvbiBBZGROZXdVc2VyKCkgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBZGROZXdVc2VyKTsKCiAgICBfdGhpcyA9IF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgX3RoaXMubmV3X2NvdXJzZV91c2VyID0gbmV3Q291cnNlVXNlcigpOwogICAgX3RoaXMuc2hvd191c2VyX2luZm8gPSBmYWxzZTsKICAgIF90aGlzLm5ld19jb3Vyc2VfdXNlcl90YWJfaW5kZXggPSAwOwogICAgX3RoaXMub2tfZGlzYWJsZWQgPSB0cnVlOwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEFkZE5ld1VzZXIsIFt7CiAgICBrZXk6ICJzaG93SW5mbyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2hvd0luZm8oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5zaG93X3VzZXJfaW5mbyA9IHRydWU7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi5uZXdfY291cnNlX3VzZXJfdGFiX2luZGV4ID0gMTsKICAgICAgfSwgNTApOyAvLyBuZXcgYSBzbGlnaHQgZGVsYXkgdG8gb3BlbiB0aGUgbmV4dCB0YWIuCgogICAgICB2YXIgdXNlciA9IHVzZXJfc3RvcmUudXNlcnMuZmluZChmdW5jdGlvbiAoX3VzZXIpIHsKICAgICAgICByZXR1cm4gX3VzZXIubG9naW5fbmFtZSA9PT0gX3RoaXMyLm5ld19jb3Vyc2VfdXNlci5sb2dpbl9uYW1lOwogICAgICB9KTsKCiAgICAgIGlmICh1c2VyKSB7CiAgICAgICAgdGhpcy5uZXdfY291cnNlX3VzZXIuZmlyc3RfbmFtZSA9IHVzZXIuZmlyc3RfbmFtZTsKICAgICAgICB0aGlzLm5ld19jb3Vyc2VfdXNlci5sYXN0X25hbWUgPSB1c2VyLmxhc3RfbmFtZTsKICAgICAgICB0aGlzLm5ld19jb3Vyc2VfdXNlci5lbWFpbCA9IHVzZXIuZW1haWw7CiAgICAgICAgdGhpcy5uZXdfY291cnNlX3VzZXIudXNlcl9pZCA9IHVzZXIudXNlcl9pZDsKICAgICAgICB0aGlzLm5ld19jb3Vyc2VfdXNlci5jb3Vyc2VfaWQgPSBhcHBfc3RhdGVfc3RvcmUuY3VycmVudF9jb3Vyc2VfaWQ7CiAgICAgIH0KCiAgICAgIHRoaXMub2tfZGlzYWJsZWQgPSBmYWxzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzYXZlVXNlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZVVzZXIoKSB7CiAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBuZXdfdXNlcjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoISh0aGlzLm5ld19jb3Vyc2VfdXNlci51c2VyX2lkID4gMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGNvdXJzZV9zdG9yZS51cGRhdGVDb3Vyc2VVc2VyKHRoaXMubmV3X2NvdXJzZV91c2VyKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJfc3RvcmUuYWRkVXNlcih0aGlzLm5ld19jb3Vyc2VfdXNlcik7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIG5ld191c2VyID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5uZXdfY291cnNlX3VzZXIsIG5ld191c2VyLCB7CiAgICAgICAgICAgICAgICAgIGNvdXJzZV9pZDogYXBwX3N0YXRlX3N0b3JlLmN1cnJlbnRfY291cnNlX2lkCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMubmV3X2NvdXJzZV91c2VyKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgcmV0dXJuIGNvdXJzZV9zdG9yZS51cGRhdGVDb3Vyc2VVc2VyKHRoaXMubmV3X2NvdXJzZV91c2VyKTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIHRoaXMubmV3X2NvdXJzZV91c2VyID0gbmV3Q291cnNlVXNlcigpOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICAgIH0pKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJsb2dpbl9uYW1lcyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHVzZXJfc3RvcmUudXNlcnMubWFwKGZ1bmN0aW9uIChfdXNlcikgewogICAgICAgIHJldHVybiBfdXNlci5sb2dpbl9uYW1lOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1c2VyX2V4aXN0cyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMubG9naW5fbmFtZXMuaW5jbHVkZXModGhpcy5uZXdfY291cnNlX3VzZXIubG9naW5fbmFtZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAib2tfdGl0bGUiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLnVzZXJfZXhpc3RzID8gIkFkZCBVc2VyIHRvIENvdXJzZSIgOiAiQ3JlYXRlIE5ldyBVc2VyIGFuZCBBZGQgVG8gQ291cnNlIjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb3Vyc2VfbmFtZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIGNvdXJzZSA9IGNvdXJzZV9zdG9yZS5jb3Vyc2VzLmZpbmQoZnVuY3Rpb24gKF9jb3Vyc2UpIHsKICAgICAgICByZXR1cm4gX2NvdXJzZS5jb3Vyc2VfaWQgPT09IGFwcF9zdGF0ZV9zdG9yZS5jdXJyZW50X2NvdXJzZV9pZDsKICAgICAgfSk7CiAgICAgIHJldHVybiBjb3Vyc2UgPyBjb3Vyc2UuY291cnNlX25hbWUgOiAiIjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb3Vyc2VfdXNlcnMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiBjb3Vyc2Vfc3RvcmUuY291cnNlX3VzZXJzOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEFkZE5ld1VzZXI7Cn0oVnVlKTsKCkFkZE5ld1VzZXIgPSBfX2RlY29yYXRlKFtDb21wb25lbnQoe30pXSwgQWRkTmV3VXNlcik7CmV4cG9ydCBkZWZhdWx0IEFkZE5ld1VzZXI7"},{"version":3,"sources":["/Users/pstaab/code/standards-grading/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/pstaab/code/standards-grading/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/pstaab/code/standards-grading/src/views/instructor-views/AddNewUser.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\nimport {\n  Component, Vue,\n} from \"vue-property-decorator\";\n\nimport { app_state_store, user_store, course_store } from \"@/store\";\nimport { newCourseUser } from \"@/common\";\nimport { Course, User } from \"../../store/models\";\n\n// @Component({ name: \"AddNewUser\" })\n@Component({})\nexport default class AddNewUser extends Vue {\n  private new_course_user = newCourseUser();\n  private show_user_info = false;\n  private new_course_user_tab_index = 0;\n  private ok_disabled = true;\n\n  private get login_names() {\n    return user_store.users.map((_user: User) => _user.login_name);\n  }\n\n  private get user_exists() {\n    return this.login_names.includes(this.new_course_user.login_name);\n  }\n\n  private get ok_title() {\n    return this.user_exists ? \"Add User to Course\" : \"Create New User and Add To Course\";\n  }\n\n  private get course_name() {\n    const course = course_store.courses\n      .find((_course: Course) => _course.course_id === app_state_store.current_course_id);\n    return course ? course.course_name : \"\";\n  }\n\n  private get course_users() {\n    return course_store.course_users;\n  }\n\n  private showInfo() {\n    this.show_user_info = true;\n    setTimeout(() => { this.new_course_user_tab_index = 1; }, 50); // new a slight delay to open the next tab.\n    const user = user_store.users.find((_user: User) => _user.login_name === this.new_course_user.login_name);\n    if (user) {\n      this.new_course_user.first_name = user.first_name;\n      this.new_course_user.last_name = user.last_name;\n      this.new_course_user.email = user.email;\n      this.new_course_user.user_id = user.user_id;\n      this.new_course_user.course_id = app_state_store.current_course_id;\n    }\n    this.ok_disabled = false;\n  }\n\n  private async saveUser() {\n    if (this.new_course_user.user_id > 0) {\n      await course_store.updateCourseUser(this.new_course_user);\n    } else {\n      const new_user = await user_store.addUser(this.new_course_user);\n      Object.assign(this.new_course_user, new_user, { course_id: app_state_store.current_course_id });\n      console.log(this.new_course_user); // eslint-disable-line no-console\n      await course_store.updateCourseUser(this.new_course_user);\n    }\n    this.new_course_user = newCourseUser();\n  }\n}\n"],"sourceRoot":""}]}